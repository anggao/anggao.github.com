<!doctype html><html lang=en><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=robots content="noodp"><meta http-equiv=x-ua-compatible content="IE=edge, chrome=1"><title>Network 02 - Ang's Blog</title><meta name=Description content="Ang's Blog"><meta property="og:title" content="Network 02"><meta property="og:description" content="Network Interfaces  Network interfaces represent a point of connection between a computer and a network. interfaces can be software or hardware  /proc filesystem  /proc/net/[tcp|udp|raw] /proc/net/route /proc/net/dev /proc/net/arp /proc/net/snmp /proc/sys/net which concerns various networking topics  /proc/sys/net/core/  message_burst, message_cost message_burst defaults to 10 and message_cost defaults to 5. This means the kernel is limited to logging 10 entries every 5 seconds. netdev_max_backlog maximum number of packets allowed to queue on a particular interface."><meta property="og:type" content="article"><meta property="og:url" content="http://anggao.github.io/2018-09-16-network-02/"><meta property="og:image" content="http://anggao.github.io/logo.png"><meta property="article:published_time" content="2018-09-16T00:00:00+00:00"><meta property="article:modified_time" content="2018-09-16T00:00:00+00:00"><meta name=twitter:card content="summary_large_image"><meta name=twitter:image content="http://anggao.github.io/logo.png"><meta name=twitter:title content="Network 02"><meta name=twitter:description content="Network Interfaces  Network interfaces represent a point of connection between a computer and a network. interfaces can be software or hardware  /proc filesystem  /proc/net/[tcp|udp|raw] /proc/net/route /proc/net/dev /proc/net/arp /proc/net/snmp /proc/sys/net which concerns various networking topics  /proc/sys/net/core/  message_burst, message_cost message_burst defaults to 10 and message_cost defaults to 5. This means the kernel is limited to logging 10 entries every 5 seconds. netdev_max_backlog maximum number of packets allowed to queue on a particular interface."><meta name=application-name content="Ang's Blog"><meta name=apple-mobile-web-app-title content="Ang's Blog"><meta name=theme-color content="#ffffff"><meta name=msapplication-TileColor content="#da532c"><link rel="shortcut icon" type=image/x-icon href=/favicon.ico><link rel=icon type=image/png sizes=32x32 href=/favicon-32x32.png><link rel=icon type=image/png sizes=16x16 href=/favicon-16x16.png><link rel=apple-touch-icon sizes=180x180 href=/apple-touch-icon.png><link rel=mask-icon href=/safari-pinned-tab.svg color=#5bbad5><link rel=manifest href=/site.webmanifest><link rel=canonical href=http://anggao.github.io/2018-09-16-network-02/><link rel=prev href=http://anggao.github.io/2018-08-12-network-01/><link rel=next href=http://anggao.github.io/2019-01-22-scala-note-01/><link rel=stylesheet href=/lib/normalize/normalize.min.css><link rel=stylesheet href=/css/style.min.css><link rel=stylesheet href=/lib/fontawesome-free/all.min.css><link rel=stylesheet href=/lib/animate/animate.min.css><script type=application/ld+json>{"@context":"http://schema.org","@type":"BlogPosting","headline":"Network 02","inLanguage":"en","mainEntityOfPage":{"@type":"WebPage","@id":"http:\/\/anggao.github.io\/2018-09-16-network-02\/"},"image":["http:\/\/anggao.github.io\/images\/Apple-Devices-Preview.png"],"genre":"posts","keywords":"linux","wordcount":779,"url":"http:\/\/anggao.github.io\/2018-09-16-network-02\/","datePublished":"2018-09-16T00:00:00+00:00","dateModified":"2018-09-16T00:00:00+00:00","license":"This work is licensed under a Creative Commons Attribution-NonCommercial 4.0 International License.","publisher":{"@type":"Organization","name":"xxxx","logo":"http:\/\/anggao.github.io\/images\/avatar.png"},"author":{"@type":"Person","name":"Ang"},"description":""}</script><script data-ad-client=ca-pub-2343695267074726 async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script></head><body header-desktop=fixed header-mobile=auto><script type=text/javascript>(window.localStorage&&localStorage.getItem('theme')?localStorage.getItem('theme')==='dark':('auto'==='auto'?window.matchMedia('(prefers-color-scheme: dark)').matches:'auto'==='dark'))&&document.body.setAttribute('theme','dark');</script><div id=mask></div><div class=wrapper><header class=desktop id=header-desktop><div class=header-wrapper><div class=header-title><a href=/ title="Ang's Blog"><span class=header-title-pre><i class="far fa-kiss-wink-heart fa-fw"></i></span>Ang's Blog</a></div><div class=menu><div class=menu-inner><a class=menu-item href=/posts/>Posts </a><a class=menu-item href=/tags/>Tags </a><a class=menu-item href=/categories/>Categories </a><a class=menu-item href=/about/>About </a><a class=menu-item href=https://github.com/anggao title=GitHub rel="noopener noreffer" target=_blank><i class="fab fa-github fa-fw"></i></a><span class="menu-item delimiter"></span><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme"><i class="fas fa-adjust fa-fw"></i></a></div></div></div></header><header class=mobile id=header-mobile><div class=header-container><div class=header-wrapper><div class=header-title><a href=/ title="Ang's Blog"><span class=header-title-pre><i class="far fa-kiss-wink-heart fa-fw"></i></span>Ang's Blog</a></div><div class=menu-toggle id=menu-toggle-mobile><span></span><span></span><span></span></div></div><div class=menu id=menu-mobile><a class=menu-item href=/posts/>Posts</a><a class=menu-item href=/tags/>Tags</a><a class=menu-item href=/categories/>Categories</a><a class=menu-item href=/about/>About</a><a class=menu-item href=https://github.com/anggao title=GitHub rel="noopener noreffer" target=_blank><i class="fab fa-github fa-fw"></i></a><a href=javascript:void(0); class="menu-item theme-switch" title="Switch Theme">
<i class="fas fa-adjust fa-fw"></i></a></div></div></header><div class="search-dropdown desktop"><div id=search-dropdown-desktop></div></div><div class="search-dropdown mobile"><div id=search-dropdown-mobile></div></div><main class=main><div class=container><div class=toc id=toc-auto><h2 class=toc-title>Contents</h2><div class=toc-content id=toc-content-auto></div></div><article class="page single"><h1 class="single-title animated flipInX">Network 02</h1><div class=post-meta><div class=post-meta-line><span class=post-author><a href=/ title=Author rel=author class=author><i class="fas fa-user-circle fa-fw"></i>Ang</a></span></div><div class=post-meta-line><i class="far fa-calendar-alt fa-fw"></i>&nbsp;<time datetime=2018-09-16>2018-09-16</time>&nbsp;<i class="fas fa-pencil-alt fa-fw"></i>&nbsp;779 words&nbsp;
<i class="far fa-clock fa-fw"></i>&nbsp;4 minutes&nbsp;</div></div><div class="details toc" id=toc-static kept><div class="details-summary toc-title"><span>Contents</span>
<span><i class="details-icon fas fa-angle-right"></i></span></div><div class="details-content toc-content" id=toc-content-static><nav id=TableOfContents><ul><li><ul><li><a href=#network-interfaces>Network Interfaces</a></li><li><a href=#proc-filesystem>/proc filesystem</a></li><li><a href=#dns-configuration>DNS configuration</a><ul><li><a href=#iptableshttpswwwdigitaloceancomcommunitytutorialshow-the-iptables-firewall-works><a href=https://www.digitalocean.com/community/tutorials/how-the-iptables-firewall-works>Iptables</a></a></li></ul></li></ul></li></ul></nav></div></div><div class=content id=content><h3 id=network-interfaces>Network Interfaces</h3><ul><li>Network interfaces represent a point of connection between a computer and a network.</li><li>interfaces can be software or hardware</li></ul><h3 id=proc-filesystem>/proc filesystem</h3><ul><li><code>/proc/net/[tcp|udp|raw]</code></li><li><code>/proc/net/route</code></li><li><code>/proc/net/dev</code></li><li><code>/proc/net/arp</code></li><li><code>/proc/net/snmp</code></li><li><strong>/proc/sys/net</strong> which concerns various networking topics<ul><li><code>/proc/sys/net/core/</code><ul><li><code>message_burst</code>, <code>message_cost</code> <code>message_burst</code> defaults to 10 and <code>message_cost</code> defaults to 5. This means the kernel is limited to logging 10 entries every 5 seconds.</li><li><code>netdev_max_backlog</code> maximum number of packets allowed to queue on a particular interface.</li><li><code>rmem_default</code> and <code>rmem_max</code> These files define the default and maximum buffer sizes for receive sockets, respectively.</li><li><code>smem_default</code> and <code>smem_max</code> These files define the default and maximum buffer sizes for send sockets, respectively.</li></ul></li><li><code>/proc/sys/net/ipv4/</code><ul><li><code>ip_forward</code></li><li><code>icmp_echo_ignore_all</code></li><li><code>icmp_echo_ignore_broadcasts</code></li><li><code>ip_default_ttl</code></li><li><code>ip_local_port_range</code></li></ul></li></ul></li></ul><h3 id=dns-configuration>DNS configuration</h3><ul><li><strong>/etc/hosts</strong><ul><li>static mappings from IP addresses to hostnames.</li><li><ip-address><cannonical-hostname>[aliases]</li></ul></li><li><strong>/etc/resolv.conf</strong>,<ul><li>configuration file for the system resolver</li><li><code>domain</code> Using this option will specific a local domain name.</li><li><code>search</code> Using this options specifies a list of domain names to iterate through when attempting to look up queries.</li><li><strong><code>search</code> and <code>domain</code> are mutually exclusive keywords</strong></li><li><code>nameserver</code>. One can have up to <code>MAXNS</code> (default 3) <code>nameserver</code> entries in this file. The resolver will query nameservers in the same order as they are written in the file.</li></ul></li><li><strong>/etc/nsswitch.conf</strong>.<ul><li>list sources of information and configure prioritization between sources.</li></ul></li></ul><p>####Â <a href=https://www.linode.com/docs/guides/diagnosing-network-issues-with-mtr/ target=_blank rel="noopener noreffer">Network Diagnostics</a></p><ul><li>Networking diagnostic tools including <code>ping</code>, <code>traceroute</code>, and <code>mtr</code> use Internet Control Message Protocol (ICMP) packets to test contention and traffic between two points on the Internet.</li><li>Tools such as traceroute and MTR send ICMP packets with incrementally increasing TTLs in order to view the route or series of hops that the packet makes between the origin and its destination.<ul><li><code>mtr -rw [destination_host]</code></li></ul></li></ul><h4 id=iptableshttpswwwdigitaloceancomcommunitytutorialshow-the-iptables-firewall-works><a href=https://www.digitalocean.com/community/tutorials/how-the-iptables-firewall-works target=_blank rel="noopener noreffer">Iptables</a></h4><ul><li><p>Iptables is a standard firewall, a front end to the kernel-level netfilter hooks that can manipulate the Linux network stack.</p></li><li><p>When the defined pattern matches, the action that takes place is called a <strong>target</strong></p></li><li><p>These rules are organized into groups called <strong>chains</strong>.</p></li><li><p>A user can create chains as needed. There are three chains defined by default.</p><ul><li><strong>INPUT</strong>: This chain handles all packets that are addressed to your server.</li><li><strong>OUTPUT</strong>: This chain contains rules for traffic created by your server.</li><li><strong>FORWARD</strong>: This chain is used to deal with traffic destined for other servers that are not created on your server. This chain is basically a way to configure your server to route requests to other machines.</li></ul></li><li><p>Each chain can contain zero or more rules, and has a default <strong>policy</strong>.</p></li><li><p>The policy determines what happens when a packet drops through all of the rules in the chain and does not match any rule.</p></li><li><p>The regular <code>iptables</code> command is used to manipulate the table containing rules that govern IPv4 traffic. For IPv6 traffic, a companion command called <code>ip6tables</code> is used.</p></li><li><div class=highlight><div class=chroma><table class=lntable><tr><td class=lntd><pre class=chroma><code><span class=lnt> 1
</span><span class=lnt> 2
</span><span class=lnt> 3
</span><span class=lnt> 4
</span><span class=lnt> 5
</span><span class=lnt> 6
</span><span class=lnt> 7
</span><span class=lnt> 8
</span><span class=lnt> 9
</span><span class=lnt>10
</span><span class=lnt>11
</span></code></pre></td><td class=lntd><pre class=chroma><code class=language-bash data-lang=bash>-L, --list <span class=o>[</span>chain<span class=o>]</span>
List all rules in the selected chain.  If no chain is selected, all chains are listed. Like every other iptables command, it applies to the specified table <span class=o>(</span>filter is the default<span class=o>)</span>, so NAT rules get listed by
               iptables -t nat -n -L
Please  note  that  it is often used with the -n option, in order to avoid long reverse DNS lookups.  It is legal to specify the -Z <span class=o>(</span>zero<span class=o>)</span> option as well, in which <span class=k>case</span> the chain<span class=o>(</span>s<span class=o>)</span> will be atomically listed and zeroed.  The exact output is affected by the other arguments given. The exact rules are suppressed <span class=k>until</span> you use
               iptables -L -v
  
-S, --list-rules <span class=o>[</span>chain<span class=o>]</span>
Print all rules in the selected chain.  If no chain is selected, all chains are printed like iptables-save. Like every other iptables command, it applies to the specified table <span class=o>(</span>filter is the default<span class=o>)</span>.
  
-F, --flush <span class=o>[</span>chain<span class=o>]</span>
Flush the selected chain <span class=o>(</span>all the chains in the table <span class=k>if</span> none is given<span class=o>)</span>.  This is equivalent to deleting all the rules one by one.
</code></pre></td></tr></table></div></div></li><li><p>For <code>-F</code> all of the rules are deleted from your chains, the default policy will <em>not</em> change with this command.</p></li><li><p><code>iptables -A INPUT -m conntrack --ctstate ESTABLISHED,RELATED -j ACCEPT</code></p></li><li><p><code>iptables -A INPUT -p tcp --dport 22 -j ACCEPT</code></p></li><li><p><code>iptables -A INPUT -p tcp --dport 80 -j ACCEPT</code></p></li><li><p><code>iptables -P INPUT DROP</code> VS <code>iptables -A INPUT -j DROP</code></p></li><li><p><code>iptables -L --line-numbers</code></p></li><li><p><code>iptables-save -f /etc/iptables/iptables.rules</code></p></li><li><p><code>iptables-restore /etc/iptables/iptables.rules</code></p></li><li><p>it is also possible to show the number of packets, and the aggregate size of the packets in bytes, that matched each particular rule. <code>-v</code></p></li><li><p>clear the counters for all chains and rules, use the <code>-Z</code> option</p></li><li><p><code>iptables -Z INPUT 1</code></p></li><li><p><code>iptables -D INPUT -m conntrack --ctstate INVALID -j DROP</code></p></li><li><p><code>iptables -D INPUT 3</code></p></li><li><p>Flush a Single Chain - <code>iptables -F INPUT</code></p></li><li><p>Flush All Chains - <code>iptables -F</code></p></li><li><p><code>iptables -t nat -F</code></p></li><li><p><code>iptables -t mangle -F</code></p></li><li><p><code>iptables -F</code></p></li><li><p><code>iptables -X</code> - delete all non-default chains (<code>-X</code>)</p></li><li></li></ul></div><div class=post-footer id=post-footer><div class=post-info><div class=post-info-line><div class=post-info-mod><span>Updated on 2018-09-16</span></div><div class=post-info-license></div></div><div class=post-info-line><div class=post-info-md><span><a class=link-to-markdown href=/2018-09-16-network-02/index.md target=_blank>Read Markdown</a></span></div><div class=post-info-share><span><a href=javascript:void(0); title="Share on Twitter" data-sharer=twitter data-url=http://anggao.github.io/2018-09-16-network-02/ data-title="Network 02" data-via=anggao data-hashtags=linux><i class="fab fa-twitter fa-fw"></i></a><a href=javascript:void(0); title="Share on Facebook" data-sharer=facebook data-url=http://anggao.github.io/2018-09-16-network-02/ data-hashtag=linux><i class="fab fa-facebook-square fa-fw"></i></a><a href=javascript:void(0); title="Share on Linkedin" data-sharer=linkedin data-url=http://anggao.github.io/2018-09-16-network-02/><i class="fab fa-linkedin fa-fw"></i></a><a href=javascript:void(0); title="Share on Hacker News" data-sharer=hackernews data-url=http://anggao.github.io/2018-09-16-network-02/ data-title="Network 02"><i class="fab fa-hacker-news fa-fw"></i></a></span></div></div></div><script async src=https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js></script><ins class=adsbygoogle style=display:block data-ad-client=ca-pub-2343695267074726 data-ad-slot=8777655695 data-ad-format=auto data-full-width-responsive=true></ins><script>(adsbygoogle=window.adsbygoogle||[]).push({});</script><div class=post-info-more><section class=post-tags><i class="fas fa-tags fa-fw"></i>&nbsp;<a href=/tags/linux/>linux</a></section><section><span><a href=javascript:void(0); onclick=window.history.back();>Back</a></span>&nbsp;|&nbsp;<span><a href=/>Home</a></span></section></div><div class=post-nav><a href=/2018-08-12-network-01/ class=prev rel=prev title="Network 01"><i class="fas fa-angle-left fa-fw"></i>Network 01</a>
<a href=/2019-01-22-scala-note-01/ class=next rel=next title="Scala Note 01">Scala Note 01<i class="fas fa-angle-right fa-fw"></i></a></div></div><div id=comments></div></article></div></main><footer class=footer><div class=footer-container><div class=footer-line>Powered by <a href=https://gohugo.io/ target=_blank rel="noopener noreffer" title="Hugo 0.74.3">Hugo</a> | Theme - <a href=https://github.com/dillonzq/LoveIt target=_blank rel="noopener noreffer" title="LoveIt 0.2.10"><i class="far fa-kiss-wink-heart fa-fw"></i>LoveIt</a></div><div class=footer-line><i class="far fa-copyright fa-fw"></i><span itemprop=copyrightYear>2013 - 2020</span><span class=author itemprop=copyrightHolder>&nbsp;<a href=/ target=_blank>Ang</a></span>&nbsp;|&nbsp;<span class=license><a rel="license external nofollow noopener noreffer" href=https://creativecommons.org/licenses/by-nc/4.0/ target=_blank>CC BY-NC 4.0</a></span></div></div></footer></div><div id=fixed-buttons><a href=# id=back-to-top class=fixed-button title="Back to Top"><i class="fas fa-arrow-up fa-fw"></i></a><a href=# id=view-comments class=fixed-button title="View Comments"><i class="fas fa-comment fa-fw"></i></a></div><script type=text/javascript src=/lib/smooth-scroll/smooth-scroll.min.js></script><script type=text/javascript src=/lib/lazysizes/lazysizes.min.js></script><script type=text/javascript src=/lib/clipboard/clipboard.min.js></script><script type=text/javascript src=/lib/sharer/sharer.min.js></script><script type=text/javascript>window.config={"code":{"copyTitle":"Copy to clipboard","maxShownLines":10},"comment":{}};</script><script type=text/javascript src=/js/theme.min.js></script><script type=text/javascript>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}gtag('js',new Date());gtag('config','UA-34162724-1',{'anonymize_ip':true});</script><script type=text/javascript src="https://www.googletagmanager.com/gtag/js?id=UA-34162724-1" async></script></body></html>